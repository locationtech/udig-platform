Ui Support For Preferred Map Scales
###################################

uDig : UI Support for preferred Map Scales

This page last changed on Dec 05, 2011 by jgarnett.

Motivation
----------

If uDig is integrated in a RCP application and the application addresses a special spatial context
(local vs. global) the scales for the map should represent this focus as well. In a local context,
e.g. cadastre management, smaller scales are not necessary. On the other hand larger scales are not
required for global navigation on small scale data sets.

Proposal
--------

Extend the Map configuration allowing the users to add and remove preferred scales (by adding scale
denominators).

The calculation of scale levels can be updated to include the use of defaults provided as global
preferences. Currently we check the layers to see if any provide explicit scales (example a TileSet
provides set zoom levels). If there are no tile set layers the calculation would default to the
current preference setting. This calculation probably needs two new modes: "default" and "custom" to
allow users greater control.

There are two pages where Map configuration occurs:

-  **Map Property Page**: used to manage the scales associated with a single map.
-  **Map Preference Page**: scales are stored in and read from Eclipse preferences Store. Defaults
   would be the current scales defined in ViewportModelImpl.

To define the preferences:

#. PreferencesInitializer for default scale denominators
#. We need to apply the preferences when creating a Map

   -  Modify MapImpl and/or the create Map action (as this is a core change to uDig)
   -  Alternative: Use a MapInterceptor (that sets the configured scale denominators before creating
      a map).

#. Additional ScaleListFieldEditor for Preferences Pages
#. Add the new scale list field for MapPreferencePage
#. Applying the Preference will update the scale list for all maps maps using:

   -  The default "auto" scale level calculation; or
   -  Or using the "default" scale level

Once a map is created the map property page:

#. Map property page can list "auto", "default" or "custom"

   -  Auto: calculated form available layers; if that is not conclusive default provided by
      preferences is used
   -  Default: explicitly use the default provided by preferences
   -  Custom: allows a user to explicitly edit the zoom scales used for this map

|image0|

Notes:

-  The `WMS TileSet Definition <WMS%20TileSet%20Definition.html>`__ proposal also needs to define
   scale. Perhaps share code?
-  Note: This is similar to the handling of metric vs imperial measurements; where a global
   preference is defined (and a map can choose automatic; metic or imperial). The "automatic"
   setting tries to check the layers; and if they are not helpful defaults to the preference
   setting.

Status
------

Project Steering committee support:

-  Andrea Antonello: +1
-  Jesse Eichar:
-  Jody Garnett: + 1
-  Mauricio Pazos:

Committer Support:

-  Frank Gasdorf: +1  

A vote of -1 requires an alternate suggestion; community members are invited to indicate
support/suggestions.

Documentation
-------------

Documentation change to `Users Guide <http://udig.refractions.net/confluence//display/EN/Home>`__
(for an accepted change).

Tasks
=====

A list of the tasks needed to accomplish this change; if you prefer you can use a single Jira issue
with subtasks. It is important to include any deadlines so the community knows when you are working
to a schedule.

 

no progress

|image1|

in progress

|image2|

blocked

|image3|

help needed

|image4|

done

Tasks:

#. |image5| Initial interface wireframe for community review and feedback
#. |image6| Review from PSC member required

   -  Review how imperial vs metric calculation is performed

#. initial preference implementation

   #. preference definition
   #. preference initialiser
   #. create reusable scale level panel
   #. preference page implementation (using scale level panel)

#. map integration

   #. Check into changing new map; or introducing a map interceptor

#. map property

   #. add scale panel

#. update scale calculation

   #. update auto calculation to use defaults from preferences
   #. update default calculation to use defaults from preferences (currently hardcoded?)
   #. update custom calculation to use values provided by user

#. test interaction with predefined zoom levels ( example WMSC )
#. Updated user guide documentation ( concepts, reference and tasks )

| 

Attachments:

| |image7|
`ProjectMapScalePreferences.png <download/attachments/13534542/ProjectMapScalePreferences.png>`__
(image/png)

+------------+----------------------------------------------------------+
| |image9|   | Document generated by Confluence on Aug 11, 2014 12:31   |
+------------+----------------------------------------------------------+

.. |image0| image:: /images/ui_support_for_preferred_map_scales/ProjectMapScalePreferences.png
.. |image1| image:: images/icons/emoticons/star_yellow.gif
.. |image2| image:: images/icons/emoticons/error.gif
.. |image3| image:: images/icons/emoticons/warning.gif
.. |image4| image:: images/icons/emoticons/check.gif
.. |image5| image:: images/icons/emoticons/check.gif
.. |image6| image:: images/icons/emoticons/warning.gif
.. |image7| image:: images/icons/bullet_blue.gif
.. |image8| image:: images/border/spacer.gif
.. |image9| image:: images/border/spacer.gif
